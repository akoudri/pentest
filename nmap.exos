nmap -sS -T1 -f -p- --scan-delay 5s <Metasploitable_IP>
-sS : Cette option spécifie un scan TCP SYN, également connu sous le nom de scan « furtif ». Dans ce mode, Nmap envoie des paquets SYN aux ports cibles et attend une réponse. Si un SYN-ACK est reçu, le port est considéré comme ouvert. Si un RST est reçu, le port est considéré comme fermé. Cette méthode de scan est relativement furtive car elle ne complète jamais la connexion TCP.
-T1 : Cette option définit le modèle de synchronisation sur « sneaky » (T1), qui est la synchronisation de balayage la plus lente et la plus furtive. Elle est utilisée pour éviter d'être détecté par les systèmes de détection d'intrusion (IDS) ou les pare-feu. L'analyse sera très lente, mais cela minimise les risques de déclencher des alertes.
-f : Cette option active la fragmentation des paquets. Nmap divisera l'en-tête TCP en plusieurs paquets, ce qui rendra plus difficile la détection du scan par les pare-feux et les IDS. La fragmentation peut aider à échapper à certaines mesures de sécurité.
-p- : Cette option spécifie la plage de ports à analyser. Dans ce cas, - signifie qu'il faut analyser les 65 535 ports de la machine cible. Cette option est utile pour découvrir les ports ouverts qui ne sont pas standard ou qui ne sont pas habituellement analysés.
--scan-delay 5s : Cette option introduit un délai de 5 secondes entre chaque sonde envoyée par Nmap. Cela ralentit encore plus le scan et permet d'éviter de déclencher des systèmes de détection d'intrusion basés sur la vitesse. Le délai peut être ajusté en fonction de l'environnement réseau et du niveau de furtivité souhaité.


Quels sont les avantages et les limites de l'utilisation des proxychains ?
Avantages des chaînes de procuration :
Anonymat et confidentialité accrus : Les chaînes de proxy acheminent votre trafic par l'intermédiaire de plusieurs serveurs proxy, ce qui rend très difficile l'identification de l'adresse IP d'origine. Chaque proxy de la chaîne ajoute une couche supplémentaire d'anonymat.
    Contournement des restrictions géographiques : En utilisant des serveurs mandataires situés dans différents pays, les chaînes de serveurs mandataires vous permettent d'accéder à des contenus soumis à des restrictions géographiques comme si vous vous trouviez dans le pays en question.
    Sécurité accrue : Grâce aux chaînes de proxys, il est plus difficile pour les attaquants de cibler directement votre machine ou d'intercepter votre trafic. Les sauts supplémentaires masquent la source des requêtes.
    Flexibilité : 
    Proxychains prend en charge différents types de proxy (HTTP, SOCKS4, SOCKS5) et vous permet de configurer le comportement du chaînage (dynamique, strict, round-robin).
    Compatibilité : 
    Proxychains peut être utilisé avec de nombreux outils et applications en ligne de commande en faisant simplement précéder la commande de « proxychains ».
Limites des chaînes de procuration :
    Vitesse et performances réduites : Chaque proxy supplémentaire dans la chaîne peut introduire une latence et ralentir votre connexion. 
    Certains outils comme nmap peuvent prendre beaucoup plus de temps pour effectuer des analyses sur des chaînes de proxy.
    Dépendance à l'égard de la fiabilité du proxy : Les chaînes de serveurs mandataires dépendent de la disponibilité et de la fiabilité des différents serveurs mandataires de la chaîne. 
    La défaillance d'un seul proxy peut entraîner la rupture de toute la chaîne en mode strict.
    Complexité de la configuration : La configuration des chaînes de serveurs mandataires avec des serveurs mandataires fiables et anonymes, la définition du mode de chaînage correct et les tests peuvent être complexes et prendre du temps par rapport à des solutions de serveurs mandataires plus simples.
    Coûts potentiels : En fonction du nombre et de la qualité des serveurs mandataires utilisés, le maintien d'une chaîne de serveurs mandataires robuste peut entraîner des coûts de bande passante et de serveur.
    Pas 100% anonyme : Bien que les chaînes de proxy améliorent considérablement l'anonymat, un adversaire hautement qualifié et déterminé peut toujours être en mesure de retracer le trafic jusqu'à la source d'origine s'il dispose de suffisamment de temps et de ressources.

nmap -sS -f -D RND:5 -p- --spoof-mac 0 <Metasploitable_IP>
-sS: Cette option spécifie un scan TCP SYN, également connu sous le nom de scan « furtif ». Dans ce mode, Nmap envoie des paquets SYN aux ports cibles et attend une réponse. Si un SYN-ACK est reçu, le port est considéré comme ouvert. Si un RST est reçu, le port est considéré comme fermé. Cette méthode d'analyse est relativement furtive car elle ne complète jamais la connexion TCP.
-f: Cette option active la fragmentation des paquets. Nmap divisera l'en-tête TCP en plusieurs paquets, ce qui rendra plus difficile la détection du scan par les pare-feu et les systèmes de détection d'intrusion (IDS). La fragmentation peut aider à échapper à certaines mesures de sécurité.
-D RND:5: Cette option spécifie les hôtes leurres à utiliser pendant le scan. La valeur RND:5 indique à Nmap de générer 5 adresses IP leurres aléatoires. Les leurres donnent l'impression que le scan provient de plusieurs adresses IP, ce qui rend plus difficile l'identification de la source réelle du scan.
-p-: Cette option indique la plage de ports à analyser. Dans ce cas, - signifie qu'il faut analyser les 65 535 ports de la machine cible. Cette option est utile pour découvrir les ports ouverts qui ne sont pas standard ou qui ne sont pas habituellement analysés.
--spoof-mac 0: Cette option indique à Nmap d'usurper l'adresse MAC de la machine à scanner. La valeur 0 signifie que Nmap générera une adresse MAC aléatoire pour chaque scan. L'usurpation d'adresse MAC peut aider à contourner certaines mesures de contrôle d'accès au réseau qui s'appuient sur les adresses MAC pour l'identification.
